
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ì†Œë¦¬ë³´ë”°ë¦¬ ìœ ì•„êµìœ¡ ë¦¬í¬íŠ¸ ìƒì„±ê¸°</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <style>
    body { font-family: 'Noto Sans KR', sans-serif; max-width: 800px; margin: auto; padding: 20px; }
    h2 { color: #b5417c; }
    select, input[type=text] { width: 100%; padding: 10px; margin-bottom: 10px; }
    button { width: 100%; padding: 12px; background-color: #b5417c; color: white; border: none; font-size: 16px; }
    #reportArea { margin-top: 20px; border: 1px solid #ccc; padding: 20px; background: #fff; }
    #saveBtn { background-color: gray; margin-top: 10px; }
  </style>
</head>
<body>
  <h2>ì†Œë¦¬ë³´ë”°ë¦¬ ìœ ì•„êµìœ¡ ë¦¬í¬íŠ¸ ìƒì„±ê¸°</h2>

  <h3>ğŸ” ì£¼ì œ ì…ë ¥ + ì—°ë ¹ ì„ íƒ</h3>
  <input type="text" id="customTopic" placeholder="ì£¼ì œë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: ë¹„í–‰ê¸°)" />
  <select id="ageSelect1">
    <option value="">-- ì—°ë ¹ ì„ íƒ --</option>
    <option>ë§Œ1ì„¸</option><option>ë§Œ2ì„¸</option><option>ë§Œ3ì„¸</option><option>ë§Œ4ì„¸</option><option>ë§Œ5ì„¸</option>
  </select>
  <button onclick="generateReport('custom')">ë¦¬í¬íŠ¸ ìƒì„±</button>

  <h3>ğŸ“… ì›” + ì£¼ì°¨ + ì—°ë ¹</h3>
  <select id="monthSelect">
    <option>3ì›”</option><option>4ì›”</option><option>5ì›”</option>
  </select>
  <select id="weekSelect">
    <option>1ì£¼ì°¨</option><option>2ì£¼ì°¨</option><option>3ì£¼ì°¨</option><option>4ì£¼ì°¨</option>
  </select>
  <select id="ageSelect2">
    <option>ë§Œ1ì„¸</option><option>ë§Œ2ì„¸</option><option>ë§Œ3ì„¸</option><option>ë§Œ4ì„¸</option><option>ë§Œ5ì„¸</option>
  </select>
  <button onclick="generateReport('calendar')">ë¦¬í¬íŠ¸ ìƒì„±</button>

  <div id="reportArea"></div>
  <button id="saveBtn" onclick="saveAsImage()">ì´ë¯¸ì§€ë¡œ ì €ì¥</button>

<script>
const reportData = {
  "íƒˆê²ƒ": {
    "ë§Œ3ì„¸": {
      "ì‹ ì²´": "ë‹¤ì–‘í•œ íƒˆê²ƒ ëª¨ì–‘ ë§Œë“¤ê¸°ë¥¼ í†µí•´ ì†Œê·¼ìœ¡ ì¡°ì ˆë ¥ì´ í–¥ìƒë©ë‹ˆë‹¤.",
      "ì‚¬íšŒ": "ì¹œêµ¬ë“¤ê³¼ íƒˆê²ƒ ì—­í• ë†€ì´ë¥¼ í•˜ë©° ì‚¬íšŒì  í˜‘ë ¥ê³¼ ê·œì¹™ ì¸ì‹ì„ í•™ìŠµí•©ë‹ˆë‹¤.",
      "ì •ì„œ": "ìµìˆ™í•œ ì‚¬ë¬¼(ë²„ìŠ¤, ìë™ì°¨ ë“±)ê³¼ì˜ ìƒí˜¸ì‘ìš©ìœ¼ë¡œ ì•ˆì •ê°ì„ í˜•ì„±í•©ë‹ˆë‹¤.",
      "ì¸ì§€": "íƒˆê²ƒì˜ êµ¬ì¡°ì™€ ê¸°ëŠ¥ì— ëŒ€í•œ ì§ˆë¬¸ì„ í†µí•´ ê´€ì°°ë ¥ê³¼ ì¶”ë¦¬ë ¥ì´ ê°•í™”ë©ë‹ˆë‹¤.",
      "ì–¸ì–´": "ë‹¤ì–‘í•œ êµí†µìˆ˜ë‹¨ì˜ ëª…ì¹­ì„ ë°°ìš°ê³  ì´ì•¼ê¸° ë‚˜ëˆ„ê¸°ë¥¼ í†µí•´ í‘œí˜„ë ¥ì„ ê¸°ë¦…ë‹ˆë‹¤."
    }
  }
};

const calendarMap = {
  "3ì›”-2ì£¼ì°¨-ë§Œ3ì„¸": "íƒˆê²ƒ"
};

function generateReport(mode) {
  let topic = "", age = "";
  if (mode === "custom") {
    topic = document.getElementById("customTopic").value.trim();
    age = document.getElementById("ageSelect1").value;
  } else {
    const month = document.getElementById("monthSelect").value;
    const week = document.getElementById("weekSelect").value;
    age = document.getElementById("ageSelect2").value;
    const key = `${month}-${week}-${age}`;
    topic = calendarMap[key] || "";
  }

  const mappedTopic = Object.keys(reportData).find(t => topic.includes(t)) || topic;
  const report = (reportData[mappedTopic] && reportData[mappedTopic][age]) || null;

  const area = document.getElementById("reportArea");
  if (!report) {
    area.innerHTML = `<p style="color:red;">ë¦¬í¬íŠ¸ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì„ íƒ ê°’ì„ í™•ì¸í•´ì£¼ì„¸ìš”.</p>`;
    return;
  }

  area.innerHTML = `
    <h3>${mappedTopic} (${age})</h3>
    <ul>
      <li><b>ì‹ ì²´:</b> ${report["ì‹ ì²´"]}</li>
      <li><b>ì‚¬íšŒ:</b> ${report["ì‚¬íšŒ"]}</li>
      <li><b>ì •ì„œ:</b> ${report["ì •ì„œ"]}</li>
      <li><b>ì¸ì§€:</b> ${report["ì¸ì§€"]}</li>
      <li><b>ì–¸ì–´:</b> ${report["ì–¸ì–´"]}</li>
    </ul>
  `;
}

function saveAsImage() {
  html2canvas(document.querySelector("#reportArea")).then(canvas => {
    const a = document.createElement("a");
    a.href = canvas.toDataURL("image/png");
    a.download = "report.png";
    a.click();
  });
}
</script>
</body>
</html>
